{"version":3,"sources":["components/Register.jsx","components/Login.jsx","components/Header/Header.js","App.js","index.js"],"names":["Register","setShowRegister","useState","success","setSuccess","error","setError","usernameRef","useRef","emailRef","passwordRef","handleSubmit","e","a","preventDefault","newUser","username","current","value","email","password","axios","post","className","Room","onSubmit","autoFocus","placeholder","ref","type","min","Cancel","onClick","Login","setShowLogin","setCurrentUsername","myStorage","user","res","data","setItem","Header","currentUsername","data-item","App","window","localStorage","getItem","pins","setPins","currentPlaceId","setCurrentPlaceId","newPlace","setNewPlace","title","setTitle","desc","setDesc","star","setStar","latitude","longitude","zoom","viewport","setViewport","showRegister","showLogin","newPin","rating","lat","long","console","log","useEffect","get","allPins","getPins","style","height","width","mapboxApiAccessToken","transitionDuration","mapStyle","onViewportChange","onDblClick","lngLat","map","p","offsetLeft","offsetTop","fontSize","color","cursor","id","_id","closeButton","closeOnClick","onClose","anchor","Array","fill","Star","format","createdAt","onChange","target","removeItem","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.976f401f.chunk.js","sourcesContent":["import { Cancel, Room } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { useRef, useState } from \"react\";\nimport \"./register.css\";\n\nexport default function Register({ setShowRegister }) {\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(false);\n  const usernameRef = useRef();\n  const emailRef = useRef();\n  const passwordRef = useRef();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newUser = {\n      username: usernameRef.current.value,\n      email: emailRef.current.value,\n      password: passwordRef.current.value,\n    };\n\n    try {\n      await axios.post(\"/users/register\", newUser);\n      setError(false);\n      setSuccess(true);\n    } catch (err) {\n      setError(true);\n    }\n  };\n  return (\n    <div className=\"registerContainer\">\n      <div className=\"logo\">\n        <Room className=\"logoIcon\" />\n        <span>LamaPin</span>\n      </div>\n      <form onSubmit={handleSubmit}>\n        <input autoFocus placeholder=\"username\" ref={usernameRef} />\n        <input type=\"email\" placeholder=\"email\" ref={emailRef} />\n        <input\n          type=\"password\"\n          min=\"6\"\n          placeholder=\"password\"\n          ref={passwordRef}\n        />\n        <button className=\"registerBtn\" type=\"submit\">\n          Register\n        </button>\n        {success && (\n          <span className=\"success\">Successfull. You can login now!</span>\n        )}\n        {error && <span className=\"failure\">Something went wrong!</span>}\n      </form>\n      <Cancel\n        className=\"registerCancel\"\n        onClick={() => setShowRegister(false)}\n      />\n    </div>\n  );\n}\n","import { Cancel, Room } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { useRef, useState } from \"react\";\nimport \"./login.css\";\n\nexport default function Login({ setShowLogin, setCurrentUsername,myStorage }) {\n  const [error, setError] = useState(false);\n  const usernameRef = useRef();\n  const passwordRef = useRef();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const user = {\n      username: usernameRef.current.value,\n      password: passwordRef.current.value,\n    };\n    try {\n      const res = await axios.post(\"/users/login\", user);\n      setCurrentUsername(res.data.username);\n      myStorage.setItem('user', res.data.username);\n      setShowLogin(false)\n    } catch (err) {\n      setError(true);\n    }\n  };\n\n  return (\n    <div className=\"loginContainer\">\n      <div className=\"logo\">\n        <Room className=\"logoIcon\" />\n        <span>LamaPin</span>\n      </div>\n      <form onSubmit={handleSubmit}>\n        <input autoFocus placeholder=\"username\" ref={usernameRef} />\n        <input\n          type=\"password\"\n          min=\"6\"\n          placeholder=\"password\"\n          ref={passwordRef}\n        />\n        <button className=\"loginBtn\" type=\"submit\">\n          Login\n        </button>\n        {error && <span className=\"failure\">Something went wrong!</span>}\n      </form>\n      <Cancel className=\"loginCancel\" onClick={() => setShowLogin(false)} />\n    </div>\n  );\n}\n","import React from 'react';\r\nimport \"./header.scss\"\r\nconst Header = ({ currentUsername }) => {\r\n    return (\r\n        <div className='header'>\r\n            <p className='menu-title' data-item='Travel App'>Travel </p>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Header;","import \"./app.css\";\nimport ReactMapGL, { Marker, Popup } from \"react-map-gl\";\nimport { useEffect, useState } from \"react\";\nimport { Room, Star, StarBorder } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { format } from \"timeago.js\";\nimport Register from \"./components/Register\";\nimport Login from \"./components/Login\";\nimport Header from \"./components/Header/Header\"\n\nfunction App() {\n  const myStorage = window.localStorage;\n  const [currentUsername, setCurrentUsername] = useState(myStorage.getItem(\"user\"));\n  const [pins, setPins] = useState([]);\n  const [currentPlaceId, setCurrentPlaceId] = useState(null);\n  const [newPlace, setNewPlace] = useState(null);\n  const [title, setTitle] = useState(null);\n  const [desc, setDesc] = useState(null);\n  const [star, setStar] = useState(0);\n  const [viewport, setViewport] = useState({\n    latitude: 47.040182,\n    longitude: 17.071727,\n    zoom: 4,\n  });\n  const [showRegister, setShowRegister] = useState(false);\n  const [showLogin, setShowLogin] = useState(false);\n\n  const handleMarkerClick = (id, lat, long) => {\n    setCurrentPlaceId(id);\n    setViewport({ ...viewport, latitude: lat, longitude: long });\n  };\n\n  const handleAddClick = (e) => {\n    const [longitude, latitude] = e.lngLat;\n    setNewPlace({\n      lat: latitude,\n      long: longitude,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newPin = {\n      username: currentUsername,\n      title,\n      desc,\n      rating: star,\n      lat: newPlace.lat,\n      long: newPlace.long,\n    };\n\n    try {\n      const res = await axios.post(\"/pins\", newPin);\n      setPins([...pins, res.data]);\n      setNewPlace(null);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    const getPins = async () => {\n      try {\n        const allPins = await axios.get(\"/pins\");\n        setPins(allPins.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getPins();\n  }, []);\n\n  const handleLogout = () => {\n    setCurrentUsername(null);\n    myStorage.removeItem(\"user\");\n  };\n\n\n\n\n  return (\n\n    <>\n\n      <Header currentUsername={currentUsername} />\n      <div style={{ height: \"80vh\", width: \"100%\" }}>\n        <ReactMapGL\n          {...viewport}\n          mapboxApiAccessToken=\"pk.eyJ1Ijoia2FtcnVsY29kZXIiLCJhIjoiY2t5YWlzNjV1MDV3cTJ2bXI2eHhlcnAwOSJ9.YoT-zZbRrXPWLt4iDljLyQ\"\n          width=\"100%\"\n          height=\"100%\"\n          transitionDuration=\"200\"\n          mapStyle=\"mapbox://styles/kamrulcoder/ckyalj2i764be14o9duawjkb8\"\n          onViewportChange={(viewport) => setViewport(viewport)}\n          onDblClick={currentUsername && handleAddClick}\n        >\n          {pins.map((p) => (\n            <>\n              <Marker\n                latitude={p.lat}\n                longitude={p.long}\n                offsetLeft={-3.5 * viewport.zoom}\n                offsetTop={-7 * viewport.zoom}\n              >\n                <Room\n                  style={{\n                    fontSize: 7 * viewport.zoom,\n                    color:\n                      currentUsername === p.username ? \"tomato\" : \"slateblue\",\n                    cursor: \"pointer\",\n                  }}\n                  onClick={() => handleMarkerClick(p._id, p.lat, p.long)}\n                />\n              </Marker>\n              {p._id === currentPlaceId && (\n                <Popup\n                  key={p._id}\n                  latitude={p.lat}\n                  longitude={p.long}\n                  closeButton={true}\n                  closeOnClick={false}\n                  onClose={() => setCurrentPlaceId(null)}\n                  anchor=\"left\"\n                >\n                  <div className=\"card\">\n                    <label>Place</label>\n                    <h4 className=\"place\">{p.title}</h4>\n                    <label>Review</label>\n                    <p className=\"desc\">{p.desc}</p>\n                    <label>Rating</label>\n                    <div className=\"stars\">\n                      {Array(p.rating).fill(<Star className=\"star\" />)}\n                    </div>\n                    <label>Information</label>\n                    <span className=\"username\">\n                      Created by <b>{p.username}</b>\n                    </span>\n                    <span className=\"date\">{format(p.createdAt)}</span>\n                  </div>\n                </Popup>\n              )}\n            </>\n          ))}\n          {newPlace && (\n            <>\n              <Marker\n                latitude={newPlace.lat}\n                longitude={newPlace.long}\n                offsetLeft={-3.5 * viewport.zoom}\n                offsetTop={-7 * viewport.zoom}\n              >\n                <Room\n                  style={{\n                    fontSize: 7 * viewport.zoom,\n                    color: \"tomato\",\n                    cursor: \"pointer\",\n                  }}\n                />\n              </Marker>\n              <Popup\n                latitude={newPlace.lat}\n                longitude={newPlace.long}\n                closeButton={true}\n                closeOnClick={false}\n                onClose={() => setNewPlace(null)}\n                anchor=\"left\"\n              >\n                <div>\n                  <form onSubmit={handleSubmit}>\n                    <label>Title</label>\n                    <input\n                      placeholder=\"Enter a title\"\n                      autoFocus\n                      onChange={(e) => setTitle(e.target.value)}\n                    />\n                    <label>Description</label>\n                    <textarea\n                      placeholder=\"Say us something about this place.\"\n                      onChange={(e) => setDesc(e.target.value)}\n                    />\n                    <label>Rating</label>\n                    <select onChange={(e) => setStar(e.target.value)}>\n                      <option value=\"1\">1</option>\n                      <option value=\"2\">2</option>\n                      <option value=\"3\">3</option>\n                      <option value=\"4\">4</option>\n                      <option value=\"5\">5</option>\n                    </select>\n                    <button type=\"submit\" className=\"submitButton\">\n                      Add Pin\n                    </button>\n                  </form>\n                </div>\n              </Popup>\n            </>\n          )}\n          {currentUsername ? (\n            <button className=\"button logout\" onClick={handleLogout}>\n              Log out\n            </button>\n          ) : (\n            <div className=\"buttons\">\n              <button className=\"button login\" onClick={() => setShowLogin(true)}>\n                Log in\n              </button>\n              <button\n                className=\"button register\"\n                onClick={() => setShowRegister(true)}\n              >\n                Register\n              </button>\n            </div>\n          )}\n          {showRegister && <Register setShowRegister={setShowRegister} />}\n          {showLogin && (\n            <Login\n              setShowLogin={setShowLogin}\n              setCurrentUsername={setCurrentUsername}\n              myStorage={myStorage}\n            />\n          )}\n        </ReactMapGL>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}